version: 2

sources:

  - name: margin_rate
    schema: dbt
    tags: ["sources", "gsheet"]      
    # freshness:
    #   warn_after: {count: 12, period: hour}
    #   error_after: {count: 24, period: hour}
    # loaded_at_field: created_at
    description: >
      -- DROP TABLE dbt.margin_rate ;
      CREATE TABLE dbt.margin_rate (
          `date_month` Date
        , `company` String
        , `margin_rate` Float32
      )
      ENGINE=URL('http://wh.zmtech.ru/api/deco_info?separator=,', CSVWithNames)
      ;      

    tables:

      - name: margin_rate